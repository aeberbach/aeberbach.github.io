<!doctype html>
<html class="no-js" lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<title>Gray Unicorn</title>
		<meta name="description" content="">
		<meta name="author" content="Adam Eberbach">

		<link rel="stylesheet" href="/theme/css/foundation.css" />
		<link rel="stylesheet" href="/theme/css/pygment/monokai.css" />
		<link rel="stylesheet" href="/theme/css/custom.css" />


		<script src="/theme/js/modernizr.js"></script>

		<!-- Feeds -->

<script>var _gaq=[['_setAccount','UA-46719042-1'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//www.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'))</script>

		<!-- mathjax config similar to math.stackexchange -->
		<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
			jax: ["input/TeX", "output/HTML-CSS"],
			tex2jax: {
				inlineMath: [ ['$', '$'] ],
				displayMath: [ ['$$', '$$']],
				processEscapes: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
			},
			messageStyle: "none",
			"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
		});
		</script>
		<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	</head>
	<body>
		<div class="off-canvas-wrap">
			<div class="inner-wrap">
				<!-- mobile top bar to activate nav -->
				<nav class="tab-bar show-for-small">
					<section class="left-small">
						<a class="left-off-canvas-toggle menu-icon" ><span></span></a>
					</section>

					<section class="middle tab-bar-section">
						<h1 class="title">Gray&nbsp;Unicorn</h1>
					</section>
				</nav>

				<!-- mobile side bar nav -->
				<aside class="left-off-canvas-menu">
					<ul class="off-canvas-list">
						<li><a href="">Home</a></li>
						<li><label>Categories</label></li>
							<li ><a href="/category/3dprinting.html">3DPrinting</a></li>
							<li ><a href="/category/bicycles.html">Bicycles</a></li>
							<li ><a href="/category/books.html">Books</a></li>
							<li class="active"><a href="/category/computers.html">Computers</a></li>
							<li ><a href="/category/development.html">Development</a></li>
							<li ><a href="/category/games.html">Games</a></li>
							<li ><a href="/category/making.html">Making</a></li>
							<li ><a href="/category/random.html">Random</a></li>

						<li><label>Links</label></li>

						<li><label>Tags</label></li>
							<li><a href="/tag/3dprinting.html">3dprinting</a></li>
							<li><a href="/tag/belt.html">belt</a></li>
							<li><a href="/tag/bicycle.html">bicycle</a></li>
							<li><a href="/tag/books.html">books</a></li>
							<li><a href="/tag/computers.html">computers</a></li>
							<li><a href="/tag/development.html">development</a></li>
							<li><a href="/tag/drifter.html">drifter</a></li>
							<li><a href="/tag/electronics.html">electronics</a></li>
							<li><a href="/tag/games.html">games</a></li>
							<li><a href="/tag/making.html">making</a></li>
							<li><a href="/tag/random.html">random</a></li>
							<li><a href="/tag/retrocomputing.html">retrocomputing</a></li>
							<li><a href="/tag/shimano.html">shimano</a></li>
							<li><a href="/tag/soma.html">SOMA</a></li>
							<li><a href="/tag/spot.html">spot</a></li>

						<li><label>Monthly Archives</label></li>
									<li><a href="/posts/2020/05/index.html">May 2020 (1)</a></li>
									<li><a href="/posts/2020/02/index.html">February 2020 (1)</a></li>
									<li><a href="/posts/2019/12/index.html">December 2019 (2)</a></li>
									<li><a href="/posts/2019/11/index.html">November 2019 (1)</a></li>
									<li><a href="/posts/2019/10/index.html">October 2019 (1)</a></li>
									<li><a href="/posts/2019/08/index.html">August 2019 (1)</a></li>
									<li><a href="/posts/2019/07/index.html">July 2019 (1)</a></li>
									<li><a href="/posts/2019/05/index.html">May 2019 (2)</a></li>
									<li><a href="/posts/2019/04/index.html">April 2019 (6)</a></li>
									<li><a href="/posts/2019/03/index.html">March 2019 (3)</a></li>
									<li><a href="/posts/2016/04/index.html">April 2016 (3)</a></li>
									<li><a href="/posts/2015/09/index.html">September 2015 (1)</a></li>
									<li><a href="/posts/2015/07/index.html">July 2015 (3)</a></li>
									<li><a href="/posts/2014/05/index.html">May 2014 (3)</a></li>
									<li><a href="/posts/2012/09/index.html">September 2012 (1)</a></li>
									<li><a href="/posts/2012/07/index.html">July 2012 (1)</a></li>
									<li><a href="/posts/2012/05/index.html">May 2012 (3)</a></li>

						<li><label>Social</label></li>
					</ul>	
				</aside>

				<!-- top bar nav -->
				<nav class="top-bar hide-for-small-only" data-topbar>
					<ul class="title-area">
						<li class="name">
							<h1><a href="/">Gray Unicorn</a></h1>
						</li>
					</ul>

					<section class="top-bar-section">
						<ul class="left">
								<li ><a href="/category/3dprinting.html">3DPrinting</a></li>
								<li ><a href="/category/bicycles.html">Bicycles</a></li>
								<li ><a href="/category/books.html">Books</a></li>
								<li class="active"><a href="/category/computers.html">Computers</a></li>
								<li ><a href="/category/development.html">Development</a></li>
								<li ><a href="/category/games.html">Games</a></li>
								<li ><a href="/category/making.html">Making</a></li>
								<li ><a href="/category/random.html">Random</a></li>
						</ul>
                        <ul class="right">                                                                                                                                           
                                                                                                          
路路路路                                                                                                                                       
                                     <li><a href="/pages/me.html">About me</a></li>                                    
                                                                                                                                          
                                                                                                                                             
                        </ul>  
					</section>
				</nav>

				<!-- Main Page Content and Sidebar -->
				<section class="main-section">
					<div class="row">
						<!-- Main Content -->
						<div class="medium-9 small-12 columns" role="content">
<article>
	<h2>Amiga 1200 Keyboard, part 2</h2>
	<p>Deriving the circuit.</p>
<p>Lots of people make keyboards these days. It's not even a big thing; once you know your circuit you get a board made, buy switches, use an open-source controller to send USB HID keystrokes and you're done. So why not? I decided to dive right in. </p>
<p>First up, what software to use? In the past I have used Protel/Altium for various things; one thing I used it for a long time ago was the Mac mini drive adapter. Designed to connect a 3.5" hard drive to the original G4 Mac mini where it expected a 2.5" hard drive, it was pretty successful. </p>
<p><a href="/images/a1200-kbd-2/mini-drive-adapter.jpg"><img alt="My Mac mini drive adapter" src="/images/a1200-kbd-2/thumb-mini-drive-adapter.jpg"></a></p>
<p>This was a big deal at the time because 2.5" drives were not only usually slower, they were usually a lot smaller - and a lot more expensive. Existing adapters could connect a drive physically but would reverse the pins. Amusingly I once connected a 2.5" hard drive in reverse and a piece of silicon detached itself from the drive PCB with a loud bang and a smoke trail. Don't do that. </p>
<p>Anyway, off to KiCAD. Things aren't as polished as you might wish - for example the Mac version I started with used white text on a light gray background - but it works really well. So probably I won't bother looking at the commercial solutions again, for the kind of work I do KiCAD is plenty. </p>
<p>To the schematic! How to design an Amiga keyboard? Well it's a membrane, and it connect to the mainboard by a flexible cable. There's no circuitry on the board, only a LED. So maybe I should make just a passive matrix and get it connected so that it looks just like the original, make a simple Amiga 1200 replacement? Which would mean extracting the circuit for the original keyboard. So I took the membrane out, pictured in the previous update.</p>
<p>The guy that made this membrane had fairly primitive CAD compared to today. Maybe it was even done by applying opaque tape to a transparency to produce artwork at double or even higher magnification, then reduced down to actual size? Anyway considering that I didn't feel too bad about deriving the circuit by tracing even if it had me dreaming of parallel lines. A light table would have been nice but a white piece of paper behind on a sunny day was enough.</p>
<p><a href="/images/a1200-kbd-2/membrane-traced.jpg"><img alt="A1200 keyboard membrane traced out" src="/images/a1200-kbd-2/thumb-membrane-traced.jpg"></a></p>
<p>Yes, there are documents that describe the keyboard circuit. However making a PCB is kind of a permanent thing, you want to be sure before you enter your credit card details. So I decided the ribbon connector that goes to the A1200 mainboard would be numbered arbitrarily from left to right, giving pins 1 to 31. Each pin would connect from 1 to n other places. By writing a number in a box on this diagram I made I would come up with a map of connections of every key (and LED) in the matrix.</p>
<p><a href="/images/a1200-kbd-2/key_map.jpg"><img alt="The key connection map" src="/images/a1200-kbd-2/thumb-key_map.jpg"></a></p>
<p>And that's the whole circuit. </p>
<p>A long time ago a grumpy old electrical engineer told me Protel for Windows was worthless because it didn't use netlists. I'm not sure how right he was, but I believe in netlists. By writing down just what lines are connected to what key contacts you get a netlist - a list of pins that must be electrically connected together. From there it's just a matter of entering this information into KiCAD, and making sure that when you extract a netlist from the schematic you have drawn, it describes the same electrical connections. Going through the netlist net by net ensures that everything is as you want it to be, not missing a connection because you were one pixel off here or there when drawing lines in the schematic editor.</p>
	<hr/>
	<h6>Written by <a href="/author/adam-eberbach.html">Adam Eberbach</a> in <a href="/category/computers.html">Computers</a> on Sat 23 March 2019. Tags: <a href="/tag/computers.html">computers</a>, <a href="/tag/development.html">development</a>, <a href="/tag/retrocomputing.html">retrocomputing</a>, </h6>
</article>

<hr/>
						</div>
						<!-- End Main Content -->
						<!-- Sidebar -->
						<aside class="medium-3 hide-for-small-only columns">
							<div class="panel">
								<h5>Links</h5>
								<ul class="side-nav">
								</ul>
							</div>

							<div class="panel">
								<h5>Tags</h5>
								<ul class="tag-cloud">
								</ul>
							</div>

							<div class="panel">
								<h5>Monthly Archives</h5>
								<ul class="side-nav">
											<li><a href="/posts/2020/05/index.html">May 2020 (1)</a></li>
											<li><a href="/posts/2020/02/index.html">February 2020 (1)</a></li>
											<li><a href="/posts/2019/12/index.html">December 2019 (2)</a></li>
											<li><a href="/posts/2019/11/index.html">November 2019 (1)</a></li>
											<li><a href="/posts/2019/10/index.html">October 2019 (1)</a></li>
											<li><a href="/posts/2019/08/index.html">August 2019 (1)</a></li>
											<li><a href="/posts/2019/07/index.html">July 2019 (1)</a></li>
											<li><a href="/posts/2019/05/index.html">May 2019 (2)</a></li>
											<li><a href="/posts/2019/04/index.html">April 2019 (6)</a></li>
											<li><a href="/posts/2019/03/index.html">March 2019 (3)</a></li>
											<li><a href="/posts/2016/04/index.html">April 2016 (3)</a></li>
											<li><a href="/posts/2015/09/index.html">September 2015 (1)</a></li>
											<li><a href="/posts/2015/07/index.html">July 2015 (3)</a></li>
											<li><a href="/posts/2014/05/index.html">May 2014 (3)</a></li>
											<li><a href="/posts/2012/09/index.html">September 2012 (1)</a></li>
											<li><a href="/posts/2012/07/index.html">July 2012 (1)</a></li>
											<li><a href="/posts/2012/05/index.html">May 2012 (3)</a></li>
								</ul>
							</div>

							<div class="panel">
								<h5>Social</h5>
								<ul class="side-nav">
								</ul>
							</div>
						</aside>
						<!-- End Sidebar -->
					</div>

					<!-- Footer -->
					<footer class="row">
						<div class="medium-9 small-12">
							<hr/>
							<p class="text-center">Powered by <a href="http://getpelican.com">Pelican</a> and <a href="http://foundation.zurb.com/">Zurb Foundation</a>. Theme by <a href="http://hamaluik.com">Kenton Hamaluik</a>.</p>
						</div>
					</footer>
					<!-- End Footer -->
				</section>
				<a class="exit-off-canvas"></a>
			</div><!--off-canvas inner-->
		</div><!--off-canvas wrap-->

		<script src="/theme/js/jquery.js"></script>
		<script src="/theme/js/foundation.min.js"></script>
		<script>
			$(document).foundation();
		</script>
	</body>
</html>